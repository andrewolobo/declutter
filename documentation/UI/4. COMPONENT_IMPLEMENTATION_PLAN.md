# Reusable UI Components Implementation Plan

**Generated:** December 16, 2025  
**Source:** Analysis of 7 HTML mockups in `documentation/specification/final/mock-ups/`

---

## Executive Summary

Based on comprehensive analysis of all HTML mockups, I've identified **42 reusable components** needed for the application. These components are categorized into 6 groups and prioritized across 8 implementation phases spanning approximately 19 days.

---

## Component Inventory

### Total Components: 42

- **Layout Components:** 6
- **Form Components:** 12
- **Card & List Components:** 8
- **Button & Action Components:** 6
- **Media & Display Components:** 5
- **Overlay & Modal Components:** 5

---

## Category 1: Layout Components (6 components)

### 1.1 AppShell.svelte

**Purpose:** Main application wrapper with header, sidebar, and content area

**Props:**

```typescript
interface AppShellProps {
  user?: AuthUser;
  showSidebar?: boolean;
  fullWidth?: boolean;
}
```

**Features:**

- Responsive layout with mobile breakpoints
- Collapsible sidebar
- Mobile menu toggle
- Sticky header
- Content area with proper overflow handling

**Used in:** All authenticated pages

**Mockup References:** 1-main-interface, 3-messages-page, 5-profile-page

---

### 1.2 Header.svelte

**Purpose:** Top navigation bar with logo, search, and user menu

**Props:**

```typescript
interface HeaderProps {
  user?: AuthUser;
  showSearch?: boolean;
  transparent?: boolean;
  onSearch?: (query: string) => void;
}
```

**Features:**

- Logo/brand section
- Search bar with autocomplete
- Notifications bell with badge
- User avatar dropdown menu
- Mobile hamburger menu trigger
- Responsive design

**Used in:** All pages

**Mockup References:** All mockups (1-7)

---

### 1.3 Sidebar.svelte

**Purpose:** Left navigation menu

**Props:**

```typescript
interface SidebarProps {
  activeRoute: string;
  collapsed?: boolean;
  onNavigate?: (route: string) => void;
}
```

**Features:**

- Navigation links: Home, Messages, Profile, Post Analytics
- Admin section (conditional)
- Active state highlighting
- Collapse/expand functionality
- Icons with labels

**Used in:** Main interface, dashboard pages

**Mockup References:** 1-main-interface, 3-messages-page, 6-post-analytics

---

### 1.4 MobileBottomNav.svelte

**Purpose:** Bottom navigation bar for mobile devices

**Props:**

```typescript
interface MobileBottomNavProps {
  activeRoute: string;
  unreadMessages?: number;
}
```

**Features:**

- 5 main navigation items (Home, Messages, Post, Profile, More)
- Icon-based navigation
- Active state indicator
- Badge support for unread counts
- Fixed bottom positioning

**Used in:** Mobile view on all authenticated pages

**Mockup References:** Mobile views in all mockups

---

### 1.5 ContentContainer.svelte

**Purpose:** Wrapper for main content with proper spacing and constraints

**Props:**

```typescript
interface ContentContainerProps {
  maxWidth?: "sm" | "md" | "lg" | "xl" | "full";
  padding?: "none" | "sm" | "md" | "lg";
  centered?: boolean;
}
```

**Features:**

- Responsive max-width constraints
- Consistent padding
- Center alignment option
- Handles overflow properly

**Used in:** All content pages

**Mockup References:** All mockups

---

### 1.6 SplitLayout.svelte

**Purpose:** Two-column layout for list-detail views

**Props:**

```typescript
interface SplitLayoutProps {
  leftWidth?: string; // e.g., '400px' or '30%'
  rightWidth?: string;
  collapsible?: boolean;
  collapseBreakpoint?: number;
}
```

**Features:**

- Resizable columns
- Responsive collapse to single column
- Smooth transitions
- Handle between columns

**Used in:** Messages page, admin moderation

**Mockup References:** 3-messages-page, 4-single-message-view

---

## Category 2: Form Components (12 components)

### 2.1 Input.svelte

**Purpose:** Text input field with validation and icon support

**Props:**

```typescript
interface InputProps {
  type?: "text" | "email" | "password" | "tel" | "url" | "number";
  label?: string;
  placeholder?: string;
  value: string;
  error?: string;
  icon?: string; // Icon name
  iconPosition?: "left" | "right";
  disabled?: boolean;
  required?: boolean;
  autocomplete?: string;
  onInput?: (value: string) => void;
}
```

**Features:**

- Validation states (error, success)
- Icon support (left/right)
- Error message display
- Disabled state styling
- Focus states
- Label animation

**Used in:** Registration, login, post creation, profile edit

**Mockup References:** 7-registration-page, 2-posting-page, 5-profile-page

---

### 2.2 TextArea.svelte

**Purpose:** Multi-line text input with character counter

**Props:**

```typescript
interface TextAreaProps {
  label?: string;
  placeholder?: string;
  value: string;
  rows?: number;
  maxLength?: number;
  error?: string;
  required?: boolean;
  autoResize?: boolean;
  onInput?: (value: string) => void;
}
```

**Features:**

- Auto-resize option
- Character counter (current/max)
- Validation states
- Minimum height
- Scrollable overflow

**Used in:** Post description, message composition, bio editing

**Mockup References:** 2-posting-page, 3-messages-page, 5-profile-page

---

### 2.3 Select.svelte

**Purpose:** Dropdown selection with optional search

**Props:**

```typescript
interface SelectOption {
  value: string;
  label: string;
  disabled?: boolean;
}

interface SelectProps {
  label?: string;
  options: SelectOption[];
  value: string;
  placeholder?: string;
  error?: string;
  disabled?: boolean;
  searchable?: boolean;
  multiple?: boolean;
  onSelect?: (value: string | string[]) => void;
}
```

**Features:**

- Custom styled dropdown
- Searchable option
- Multiple selection
- Keyboard navigation
- Loading state
- Empty state

**Used in:** Category selection, location selection, filters

**Mockup References:** 2-posting-page (category, location)

---

### 2.4 Checkbox.svelte

**Purpose:** Single checkbox input

**Props:**

```typescript
interface CheckboxProps {
  label: string;
  checked: boolean;
  disabled?: boolean;
  error?: string;
  indeterminate?: boolean;
  onChange?: (checked: boolean) => void;
}
```

**Features:**

- Custom styled checkbox
- Indeterminate state
- Label clickable
- Disabled state
- Animation on check

**Used in:** Terms acceptance, filter options, multi-select

**Mockup References:** 7-registration-page

---

### 2.5 Radio.svelte

**Purpose:** Radio button group

**Props:**

```typescript
interface RadioOption {
  value: string;
  label: string;
  disabled?: boolean;
}

interface RadioProps {
  name: string;
  options: RadioOption[];
  value: string;
  label?: string;
  disabled?: boolean;
  onChange?: (value: string) => void;
}
```

**Features:**

- Custom styled radio buttons
- Horizontal/vertical layout
- Disabled state
- Group label

**Used in:** Post duration, payment method selection

**Mockup References:** 2-posting-page (duration: 1 day, 7 days, 30 days)

---

### 2.6 Toggle.svelte

**Purpose:** Toggle switch for boolean settings

**Props:**

```typescript
interface ToggleProps {
  label?: string;
  checked: boolean;
  disabled?: boolean;
  size?: "sm" | "md" | "lg";
  onChange?: (checked: boolean) => void;
}
```

**Features:**

- Smooth animation
- Multiple sizes
- Disabled state
- Optional label

**Used in:** Settings, dark mode toggle, notification preferences

**Mockup References:** Settings sections (implied in profile)

---

### 2.7 FileUpload.svelte

**Purpose:** File input with drag & drop support

**Props:**

```typescript
interface FileUploadProps {
  accept?: string; // e.g., 'image/*'
  multiple?: boolean;
  maxSize?: number; // in bytes
  maxFiles?: number;
  preview?: boolean;
  onUpload?: (files: File[]) => void;
  onError?: (error: string) => void;
}
```

**Features:**

- Drag & drop zone
- File validation (type, size)
- Preview thumbnails
- Progress indicators
- Remove uploaded files
- Error handling

**Used in:** Post image upload, profile picture

**Mockup References:** 2-posting-page (image upload area)

---

### 2.8 ImageUploader.svelte

**Purpose:** Specialized image uploader with preview and reordering

**Props:**

```typescript
interface ImageUploaderProps {
  images: string[]; // URLs or base64
  maxImages?: number;
  aspectRatio?: string; // e.g., '16:9'
  onUpload?: (images: File[]) => void;
  onRemove?: (index: number) => void;
  onReorder?: (newOrder: number[]) => void;
}
```

**Features:**

- Multi-image upload (up to 5 for posts)
- Drag to reorder
- Image preview
- Crop/edit modal
- Automatic compression
- Set as primary image

**Used in:** Post creation

**Mockup References:** 2-posting-page (multiple image slots)

---

### 2.9 DateTimePicker.svelte

**Purpose:** Date and time selection

**Props:**

```typescript
interface DateTimePickerProps {
  value: Date | null;
  minDate?: Date;
  maxDate?: Date;
  label?: string;
  error?: string;
  showTime?: boolean;
  onChange?: (date: Date) => void;
}
```

**Features:**

- Calendar popup
- Time selection
- Min/max date restrictions
- Keyboard navigation
- Format customization

**Used in:** Post scheduling

**Mockup References:** 2-posting-page (schedule option)

---

### 2.10 PriceInput.svelte

**Purpose:** Currency input with formatting

**Props:**

```typescript
interface PriceInputProps {
  value: number;
  currency?: string; // Default: 'UGX'
  min?: number;
  max?: number;
  label?: string;
  error?: string;
  onChange?: (value: number) => void;
}
```

**Features:**

- Currency symbol display
- Number formatting (thousands separator)
- Min/max validation
- Only numeric input

**Used in:** Post price

**Mockup References:** 2-posting-page (price field)

---

### 2.11 PhoneInput.svelte

**Purpose:** Phone number input with country code

**Props:**

```typescript
interface PhoneInputProps {
  value: string;
  countryCode?: string; // Default: '+256' (Uganda)
  label?: string;
  error?: string;
  onChange?: (value: string) => void;
}
```

**Features:**

- Country code selector
- Phone format validation
- Format display (e.g., +256 700 123 456)
- Uganda-specific validation

**Used in:** Registration, profile edit, contact info

**Mockup References:** 7-registration-page, 5-profile-page

---

### 2.12 SearchBar.svelte

**Purpose:** Search input with suggestions and filters

**Props:**

```typescript
interface SearchBarProps {
  placeholder?: string;
  value: string;
  filters?: SearchFilter[];
  suggestions?: string[];
  loading?: boolean;
  onSearch?: (query: string) => void;
  onFilterChange?: (filters: SearchFilter[]) => void;
}
```

**Features:**

- Autocomplete suggestions
- Recent searches
- Filter chips
- Clear button
- Loading indicator
- Keyboard navigation

**Used in:** Header search, post search, message search

**Mockup References:** 1-main-interface (header), search pages

---

## Category 3: Card & List Components (8 components)

### 3.1 PostCard.svelte

**Purpose:** Display post information in various layouts

**Props:**

```typescript
interface PostCardProps {
  post: Post;
  variant?: "feed" | "grid" | "list";
  showActions?: boolean;
  onLike?: () => void;
  onShare?: () => void;
  onEdit?: () => void;
  onDelete?: () => void;
}
```

**Features:**

- Image carousel (for multiple images)
- Like button with count
- Price display
- Status badge (active/expired/pending)
- Location and date
- User avatar and name
- Menu dropdown (edit/delete/report)
- Click to view details

**Variants:**

- **Feed:** Full-width card with images on top
- **Grid:** Compact card for grid layout
- **List:** Horizontal layout with smaller images

**Used in:** Main feed, profile posts, search results

**Mockup References:** 1-main-interface (feed cards)

---

### 3.2 PostCardSkeleton.svelte

**Purpose:** Loading placeholder for PostCard

**Props:**

```typescript
interface PostCardSkeletonProps {
  variant?: "feed" | "grid" | "list";
  count?: number;
}
```

**Features:**

- Animated shimmer effect
- Matches PostCard dimensions
- Multiple skeletons support

**Used in:** Feed loading, search loading

**Mockup References:** Loading states

---

### 3.3 UserCard.svelte

**Purpose:** Display user profile information

**Props:**

```typescript
interface UserCardProps {
  user: User;
  showBio?: boolean;
  showFollowButton?: boolean;
  showStats?: boolean;
  onFollow?: () => void;
  onClick?: () => void;
}
```

**Features:**

- Avatar with online status
- Name and verified badge
- Bio (optional)
- Stats (posts, followers)
- Follow/Unfollow button
- Clickable to profile

**Used in:** User lists, profile page, admin panel

**Mockup References:** 5-profile-page, admin sections

---

### 3.4 MessagePreviewCard.svelte

**Purpose:** Display conversation preview in message list

**Props:**

```typescript
interface MessagePreviewCardProps {
  conversation: Conversation;
  active?: boolean;
  unreadCount?: number;
  onClick?: () => void;
}
```

**Features:**

- User avatar
- Last message preview (truncated)
- Timestamp
- Unread badge
- Active state highlight
- Online status indicator

**Used in:** Messages list

**Mockup References:** 3-messages-page (left panel)

---

### 3.5 NotificationCard.svelte

**Purpose:** Display notification item

**Props:**

```typescript
interface NotificationCardProps {
  notification: Notification;
  read?: boolean;
  onDismiss?: () => void;
  onAction?: () => void;
}
```

**Features:**

- Icon based on type (like, comment, message, etc.)
- User avatar
- Notification message
- Timestamp
- Action button (optional)
- Mark as read
- Dismiss button

**Used in:** Notifications dropdown, notifications page

**Mockup References:** Header notifications

---

### 3.6 StatCard.svelte

**Purpose:** Display key metrics and statistics

**Props:**

```typescript
interface StatCardProps {
  title: string;
  value: number | string;
  icon?: string;
  trend?: {
    value: number;
    direction: "up" | "down";
  };
  color?: string;
  format?: "number" | "currency" | "percentage";
}
```

**Features:**

- Large value display
- Icon
- Trend indicator (up/down arrow with percentage)
- Color coding
- Responsive sizing

**Used in:** Post analytics, admin dashboard, profile stats

**Mockup References:** 6-post-analytics-code (Views, Likes, Messages, Conversion)

---

### 3.7 CategoryCard.svelte

**Purpose:** Display category with post count

**Props:**

```typescript
interface CategoryCardProps {
  category: Category;
  postCount?: number;
  image?: string;
  onClick?: () => void;
}
```

**Features:**

- Category icon/image
- Category name
- Post count
- Hover effect
- Clickable

**Used in:** Category browsing, category selection

**Mockup References:** Category sections

---

### 3.8 EmptyState.svelte

**Purpose:** Display when no data is available

**Props:**

```typescript
interface EmptyStateProps {
  icon?: string;
  title: string;
  description?: string;
  action?: () => void;
  actionLabel?: string;
}
```

**Features:**

- Icon or illustration
- Title and description
- Optional CTA button
- Centered layout

**Used in:** No posts, no messages, no results, empty filters

**Mockup References:** Empty states implied

---

## Category 4: Button & Action Components (6 components)

### 4.1 Button.svelte

**Purpose:** Primary interactive button

**Props:**

```typescript
interface ButtonProps {
  variant?: "primary" | "secondary" | "ghost" | "danger";
  size?: "sm" | "md" | "lg";
  loading?: boolean;
  disabled?: boolean;
  icon?: string;
  iconPosition?: "left" | "right";
  fullWidth?: boolean;
  type?: "button" | "submit" | "reset";
  onClick?: () => void;
}
```

**Features:**

- Multiple variants and sizes
- Loading state with spinner
- Icon support
- Disabled state
- Full-width option
- Keyboard accessible

**Used in:** All forms and actions throughout the app

**Mockup References:** All mockups (7-registration, 2-posting, etc.)

---

### 4.2 IconButton.svelte

**Purpose:** Icon-only button for compact actions

**Props:**

```typescript
interface IconButtonProps {
  icon: string;
  size?: "sm" | "md" | "lg";
  variant?: "default" | "primary" | "danger";
  ariaLabel: string;
  badge?: number | boolean;
  disabled?: boolean;
  onClick?: () => void;
}
```

**Features:**

- Icon display
- Badge support (count or dot)
- Tooltip on hover
- Circular or square
- Active states

**Used in:** Toolbars, headers, card actions

**Mockup References:** Header icons, card menus

---

### 4.3 LikeButton.svelte

**Purpose:** Like/unlike action with animation

**Props:**

```typescript
interface LikeButtonProps {
  liked: boolean;
  count: number;
  disabled?: boolean;
  onToggle?: (liked: boolean) => void;
}
```

**Features:**

- Animated heart icon
- Like count display
- Toggle state (liked/unliked)
- Optimistic UI update
- Color change on like

**Used in:** Post cards, post detail

**Mockup References:** 1-main-interface (post cards)

---

### 4.4 ShareButton.svelte

**Purpose:** Share content via various channels

**Props:**

```typescript
interface ShareButtonProps {
  url: string;
  title: string;
  description?: string;
  image?: string;
}
```

**Features:**

- Share menu popup
- Multiple share options (WhatsApp, Facebook, Twitter, Copy Link)
- Native share API support (mobile)
- Copy link functionality

**Used in:** Post cards, post detail

**Mockup References:** Post actions

---

### 4.5 FollowButton.svelte

**Purpose:** Follow/unfollow user action

**Props:**

```typescript
interface FollowButtonProps {
  following: boolean;
  userId: string;
  disabled?: boolean;
  onToggle?: (following: boolean) => void;
}
```

**Features:**

- Toggle follow state
- Loading state
- Optimistic update
- Different labels (Follow/Following/Unfollow on hover)

**Used in:** User cards, profile header

**Mockup References:** 5-profile-page, user lists

---

### 4.6 DropdownMenu.svelte

**Purpose:** Contextual menu for actions

**Props:**

```typescript
interface MenuItem {
  label: string;
  icon?: string;
  action: () => void;
  danger?: boolean;
  divider?: boolean;
}

interface DropdownMenuProps {
  items: MenuItem[];
  trigger?: "click" | "hover";
  position?: "bottom-left" | "bottom-right" | "top-left" | "top-right";
  align?: "start" | "end";
}
```

**Features:**

- Customizable menu items
- Icon support
- Danger items (red)
- Dividers between groups
- Keyboard navigation
- Click outside to close

**Used in:** User menu, post actions, more options

**Mockup References:** Header user menu, post card overflow menu

---

## Category 5: Media & Display Components (5 components)

### 5.1 Avatar.svelte

**Purpose:** User profile picture with status indicators

**Props:**

```typescript
interface AvatarProps {
  src?: string;
  alt: string;
  size?: "xs" | "sm" | "md" | "lg" | "xl";
  status?: "online" | "offline" | "away";
  badge?: string; // Icon name for badge
  editable?: boolean;
  onClick?: () => void;
}
```

**Features:**

- Multiple size variants
- Fallback to initials if no image
- Online status indicator (dot)
- Badge overlay (verified, admin, etc.)
- Editable overlay (camera icon)
- Border/ring styling

**Used in:** User profiles, comments, messages, headers

**Mockup References:** All mockups with user representations

---

### 5.2 ImageCarousel.svelte

**Purpose:** Multi-image viewer with navigation

**Props:**

```typescript
interface ImageCarouselProps {
  images: string[];
  aspectRatio?: string; // e.g., '16:9', '1:1'
  autoPlay?: boolean;
  autoPlayInterval?: number;
  showThumbnails?: boolean;
  showCounter?: boolean;
  onImageClick?: (index: number) => void;
}
```

**Features:**

- Swipe/drag navigation
- Dot indicators
- Arrow buttons
- Thumbnail strip (optional)
- Image counter (e.g., "1/5")
- Lightbox/fullscreen on click
- Lazy loading
- Touch gestures support

**Used in:** Post cards, post detail page

**Mockup References:** 1-main-interface (posts with multiple images)

---

### 5.3 Badge.svelte

**Purpose:** Status indicator or counter

**Props:**

```typescript
interface BadgeProps {
  variant?: "status" | "count" | "label";
  color?: "primary" | "success" | "warning" | "danger" | "info";
  size?: "sm" | "md" | "lg";
  dot?: boolean;
  pulse?: boolean;
}
```

**Features:**

- Multiple variants (pill, dot, square)
- Color coding
- Dot indicator option
- Pulse animation
- Size variants

**Used in:** Post status, notifications, unread counts, tags

**Mockup References:** Post cards (Active/Expired), notification bell

---

### 5.4 Tag.svelte

**Purpose:** Labeled tag or chip

**Props:**

```typescript
interface TagProps {
  label: string;
  color?: string;
  removable?: boolean;
  icon?: string;
  size?: "sm" | "md" | "lg";
  onRemove?: () => void;
  onClick?: () => void;
}
```

**Features:**

- Colored background
- Icon support
- Removable (X button)
- Clickable
- Rounded styling

**Used in:** Categories, filters, search tags

**Mockup References:** Category tags, filter chips

---

### 5.5 ProgressBar.svelte

**Purpose:** Progress indicator

**Props:**

```typescript
interface ProgressBarProps {
  value: number; // 0-100
  max?: number;
  label?: string;
  showPercentage?: boolean;
  color?: string;
  striped?: boolean;
  animated?: boolean;
}
```

**Features:**

- Animated fill
- Label display
- Percentage display
- Color variants
- Striped pattern option

**Used in:** File upload, post analytics, profile completion

**Mockup References:** Upload progress, analytics charts

---

## Category 6: Overlay & Modal Components (5 components)

### 6.1 Modal.svelte

**Purpose:** Overlay dialog for focused content

**Props:**

```typescript
interface ModalProps {
  open: boolean;
  title?: string;
  size?: "sm" | "md" | "lg" | "xl" | "full";
  closeOnClickOutside?: boolean;
  closeButton?: boolean;
  onClose: () => void;
}
```

**Features:**

- Backdrop overlay
- Close button (X)
- Click outside to close
- Multiple size variants
- Scroll handling
- Focus trap
- Animation (fade + scale)
- Escape key to close

**Slots:**

- Default (body content)
- Header
- Footer

**Used in:** Confirmation dialogs, forms, image viewer, details

**Mockup References:** Implied for various actions (delete, edit, view)

---

### 6.2 Drawer.svelte

**Purpose:** Slide-in panel from screen edge

**Props:**

```typescript
interface DrawerProps {
  open: boolean;
  position?: "left" | "right" | "bottom";
  size?: string; // e.g., '300px' or '80%'
  closeOnClickOutside?: boolean;
  onClose: () => void;
}
```

**Features:**

- Slide-in animation
- Backdrop overlay
- Push or overlay mode
- Responsive (full-screen on mobile)
- Scroll handling

**Used in:** Mobile menu, filters panel, settings

**Mockup References:** Mobile navigation

---

### 6.3 Toast.svelte

**Purpose:** Temporary notification message

**Props:**

```typescript
interface ToastProps {
  message: string;
  variant?: "success" | "error" | "warning" | "info";
  duration?: number; // milliseconds
  action?: {
    label: string;
    onClick: () => void;
  };
  onClose?: () => void;
}
```

**Features:**

- Auto-dismiss after duration
- Manual close button
- Action button (optional)
- Queue management (multiple toasts)
- Position (top-right, bottom-center, etc.)
- Icon based on variant
- Slide-in animation

**Used in:** Success/error feedback, undo actions

**Mockup References:** Success/error messages throughout

---

### 6.4 Tooltip.svelte

**Purpose:** Contextual help text on hover

**Props:**

```typescript
interface TooltipProps {
  content: string;
  position?: "top" | "bottom" | "left" | "right";
  delay?: number; // milliseconds
  trigger?: "hover" | "click" | "focus";
  maxWidth?: string;
}
```

**Features:**

- Hover/click/focus triggers
- Smart positioning (auto-adjust)
- Arrow pointer
- Delay before show
- Fade animation

**Used in:** Icon explanations, help text, truncated content

**Mockup References:** Icon tooltips, help indicators

---

### 6.5 ConfirmDialog.svelte

**Purpose:** Confirmation modal for destructive actions

**Props:**

```typescript
interface ConfirmDialogProps {
  open: boolean;
  title: string;
  message: string;
  confirmLabel?: string; // Default: 'Confirm'
  cancelLabel?: string; // Default: 'Cancel'
  danger?: boolean; // Red confirm button
  loading?: boolean;
  onConfirm: () => void | Promise<void>;
  onCancel: () => void;
}
```

**Features:**

- Two-action layout (Cancel/Confirm)
- Danger variant (red button)
- Loading state on confirm
- Icon based on type
- Keyboard shortcuts (Enter/Escape)

**Used in:** Delete actions, logout, irreversible operations

**Mockup References:** Delete post, delete account actions

---

## Implementation Strategy

### Phase 0: Theme & Design System Setup (Days 1-2) ğŸ¨ CRITICAL

**Components: 0 (Setup & Configuration)**

**Deliverables:**

1. **Update Tailwind Configuration**
   - Set exact colors from mockup (#13ecec primary, #102222 dark background)
   - Configure dark mode as default
   - Set up glassmorphism utilities
   - Add safe area utilities for iOS

2. **Install and Configure Material Symbols**
   - Add Google Material Symbols font
   - Configure font-variation-settings
   - Create icon component wrapper
   - Document icon usage patterns

3. **Typography Setup**
   - Install Plus Jakarta Sans font (weights: 400, 500, 700, 800)
   - Configure font-family in Tailwind
   - Set up text size scale from mockup
   - Document typography system

4. **Design Tokens**
   - Document exact spacing values from mockup
   - Define shadow utilities (minimalist approach)
   - Set up border radius scale
   - Configure backdrop-blur values

5. **Theme Documentation**
   - Create design system documentation
   - Document color usage patterns
   - Create visual style guide
   - Set up Storybook theme decorator

**Why First:**

- Establishes visual foundation for all components
- Prevents rework of styling later
- Ensures consistency with mockup design
- Required before building any components

**Acceptance Criteria:**

- âœ… Tailwind config matches mockup colors exactly
- âœ… Dark mode works by default
- âœ… Material Symbols icons render correctly
- âœ… Plus Jakarta Sans loads on all pages
- âœ… Glassmorphism effects work as in mockup
- âœ… iOS safe areas handled properly
- âœ… Design tokens documented

---

### Phase 1: Foundation (Days 3-5) â­ CRITICAL

**Components: 8**

1. Button âœ… (exists, may need enhancement)
2. Input
3. TextArea
4. Select
5. Avatar
6. Badge
7. LoadingSpinner âœ… (exists)
8. ErrorMessage âœ… (exists)

**Why First:**

- Required by almost all other components
- Establishes design system patterns
- Most frequently used components

**Deliverables:**

- Fully typed components with props interfaces
- Storybook stories for each variant
- Unit tests (Vitest)
- Accessibility compliance (ARIA labels, keyboard nav)

---

### Phase 2: Layout (Days 6-7) â­ HIGH PRIORITY

**Components: 5** 9. AppShell 10. Header 11. Sidebar 12. MobileBottomNav 13. ContentContainer

**Why Second:**

- Needed to build actual pages
- Layout system affects all subsequent components
- Establishes navigation structure

**Deliverables:**

- Responsive layout system
- Mobile-first design
- Route integration
- Theme support (light/dark)

---

### Phase 3: Cards & Lists (Days 8-10) â­ HIGH PRIORITY

**Components: 6** 14. PostCard 15. PostCardSkeleton 16. UserCard 17. MessagePreviewCard 18. StatCard 19. EmptyState âœ… (exists)

**Why Third:**

- Core content display components
- Most visible to users
- Required for MVP pages

**Deliverables:**

- Multiple layout variants
- Loading states
- Interaction handlers
- Responsive design

---

### Phase 4: Forms & Inputs (Days 11-13) âº MEDIUM PRIORITY

**Components: 8** 20. FileUpload 21. ImageUploader 22. PhoneInput 23. PriceInput 24. DateTimePicker 25. Checkbox 26. Radio 27. Toggle 28. SearchBar

**Why Fourth:**

- Specialized form components
- Needed for post creation and editing
- Can build on Phase 1 components

**Deliverables:**

- Advanced input validation
- File handling logic
- Format helpers
- Integration with upload service

---

### Phase 5: Media & Display (Days 14-15) âº MEDIUM PRIORITY

**Components: 4** 29. ImageCarousel 30. Tag 31. ProgressBar 32. NotificationCard

**Why Fifth:**

- Enhance user experience
- Not blocking for core functionality
- Build on existing components

**Deliverables:**

- Smooth animations
- Touch gesture support
- Performance optimization

---

### Phase 6: Actions & Interactions (Days 16-17) âº MEDIUM PRIORITY

**Components: 5** 33. IconButton 34. LikeButton 35. ShareButton 36. FollowButton 37. DropdownMenu

**Why Sixth:**

- Social interaction features
- Build on Phase 1 Button component
- Enhance engagement

**Deliverables:**

- Optimistic UI updates
- Integration with services
- Animation effects

---

### Phase 7: Overlays & Modals (Days 18-19) â¹ LOW PRIORITY

**Components: 5** 38. Modal 39. Drawer 40. Toast 41. Tooltip 42. ConfirmDialog

**Why Seventh:**

- Polish and UX enhancements
- Not required for basic functionality
- Can be added progressively

**Deliverables:**

- Focus management
- Animation polish
- Accessibility (focus trap, escape key)
- Global state management for toasts

---

### Phase 8: Specialized Components (Days 20-21) â¹ LOW PRIORITY

**Components: 2** 43. SplitLayout 44. CategoryCard

**Why Last:**

- Specialized use cases
- Nice-to-have features
- Can be built quickly using primitives

**Deliverables:**

- Specialized layouts
- Category browsing experience

---

## Technical Implementation Guidelines

### 1. Component Structure

```typescript
<script lang="ts">
  // Props interface
  interface ComponentProps {
    // ... props
  }

  // Props with defaults
  let {
    variant = 'default',
    size = 'md',
    ...rest
  }: ComponentProps = $props();

  // Local state
  let isOpen = $state(false);

  // Derived state
  let classes = $derived(`base-class ${variant} ${size}`);

  // Functions
  function handleClick() {
    // ...
  }
</script>

<div class={classes} {...rest}>
  {@render children?.()}
</div>

<style>
  /* Component styles */
</style>
```

### 2. TypeScript Standards

- **Full type safety:** All props, events, slots
- **Exported interfaces:** For external use
- **Generic types:** Where applicable (lists, etc.)
- **Strict mode:** No `any` types

### 3. Accessibility Requirements

- **ARIA labels:** All interactive elements
- **Keyboard navigation:** Tab order, focus visible
- **Screen readers:** Meaningful labels, roles
- **Focus management:** Modals, dropdowns, etc.
- **Color contrast:** WCAG AA minimum

### 4. Responsive Design

- **Mobile-first:** Start with mobile breakpoints
- **Breakpoints:** `sm: 640px`, `md: 768px`, `lg: 1024px`, `xl: 1280px`
- **Touch targets:** Minimum 44x44px
- **Viewport units:** Use responsive units

### 5. Performance

- **Lazy loading:** Images, heavy components
- **Code splitting:** Dynamic imports for large components
- **Memoization:** Expensive computations
- **Virtualization:** Long lists (if needed)

### 6. Testing Strategy

- **Unit tests:** Each component with Vitest
- **Visual tests:** Storybook stories for all variants
- **Integration tests:** Component interactions
- **Accessibility tests:** Automated a11y checks

### 7. Documentation

- **JSDoc comments:** All props and functions
- **Storybook stories:** All variants and states
- **Usage examples:** Common patterns
- **Props table:** Auto-generated from types

---

## File Structure

```
src/lib/components/
â”œâ”€â”€ common/                 # Foundation components (Phase 1)
â”‚   â”œâ”€â”€ Button.svelte
â”‚   â”œâ”€â”€ Input.svelte
â”‚   â”œâ”€â”€ TextArea.svelte
â”‚   â”œâ”€â”€ Select.svelte
â”‚   â”œâ”€â”€ Avatar.svelte
â”‚   â”œâ”€â”€ Badge.svelte
â”‚   â”œâ”€â”€ LoadingSpinner.svelte
â”‚   â””â”€â”€ ErrorMessage.svelte
â”‚
â”œâ”€â”€ layout/                 # Layout components (Phase 2)
â”‚   â”œâ”€â”€ AppShell.svelte
â”‚   â”œâ”€â”€ Header.svelte
â”‚   â”œâ”€â”€ Sidebar.svelte
â”‚   â”œâ”€â”€ MobileBottomNav.svelte
â”‚   â”œâ”€â”€ ContentContainer.svelte
â”‚   â””â”€â”€ SplitLayout.svelte
â”‚
â”œâ”€â”€ forms/                  # Form components (Phase 4)
â”‚   â”œâ”€â”€ Checkbox.svelte
â”‚   â”œâ”€â”€ Radio.svelte
â”‚   â”œâ”€â”€ Toggle.svelte
â”‚   â”œâ”€â”€ FileUpload.svelte
â”‚   â”œâ”€â”€ ImageUploader.svelte
â”‚   â”œâ”€â”€ PhoneInput.svelte
â”‚   â”œâ”€â”€ PriceInput.svelte
â”‚   â”œâ”€â”€ DateTimePicker.svelte
â”‚   â””â”€â”€ SearchBar.svelte
â”‚
â”œâ”€â”€ cards/                  # Card components (Phase 3)
â”‚   â”œâ”€â”€ PostCard.svelte
â”‚   â”œâ”€â”€ PostCardSkeleton.svelte
â”‚   â”œâ”€â”€ UserCard.svelte
â”‚   â”œâ”€â”€ MessagePreviewCard.svelte
â”‚   â”œâ”€â”€ NotificationCard.svelte
â”‚   â”œâ”€â”€ StatCard.svelte
â”‚   â”œâ”€â”€ CategoryCard.svelte
â”‚   â””â”€â”€ EmptyState.svelte
â”‚
â”œâ”€â”€ media/                  # Media components (Phase 5)
â”‚   â”œâ”€â”€ ImageCarousel.svelte
â”‚   â”œâ”€â”€ Tag.svelte
â”‚   â””â”€â”€ ProgressBar.svelte
â”‚
â”œâ”€â”€ actions/                # Action components (Phase 6)
â”‚   â”œâ”€â”€ IconButton.svelte
â”‚   â”œâ”€â”€ LikeButton.svelte
â”‚   â”œâ”€â”€ ShareButton.svelte
â”‚   â”œâ”€â”€ FollowButton.svelte
â”‚   â””â”€â”€ DropdownMenu.svelte
â”‚
â””â”€â”€ overlays/               # Overlay components (Phase 7)
    â”œâ”€â”€ Modal.svelte
    â”œâ”€â”€ Drawer.svelte
    â”œâ”€â”€ Toast.svelte
    â”œâ”€â”€ Tooltip.svelte
    â””â”€â”€ ConfirmDialog.svelte
```

---

## Design System Tokens

### Colors (From Mockup)

```javascript
// tailwind.config.js
colors: {
  // Primary brand color (cyan/turquoise)
  primary: '#13ecec',

  // Background colors
  'background-light': '#f6f8f8',
  'background-dark': '#102222',

  // Semantic colors (keep flexible palette)
  success: {
    light: '#10b981',
    DEFAULT: '#059669',
    dark: '#047857'
  },
  warning: {
    light: '#f59e0b',
    DEFAULT: '#d97706',
    dark: '#b45309'
  },
  danger: {
    light: '#ef4444',
    DEFAULT: '#dc2626',
    dark: '#b91c1c'
  },
  info: {
    light: '#3b82f6',
    DEFAULT: '#2563eb',
    dark: '#1d4ed8'
  }
}
```

### Dark Mode Configuration

```javascript
// tailwind.config.js
darkMode: 'class', // Controlled by 'dark' class on <html>

// app.html - Dark mode by default
<html class="dark" lang="en">
```

### Spacing Scale

```
xs: 0.25rem (4px)
sm: 0.5rem (8px)
md: 1rem (16px)
lg: 1.5rem (24px)
xl: 2rem (32px)
2xl: 3rem (48px)
```

### Typography Scale

```
xs: 0.75rem (12px)
sm: 0.875rem (14px)
base: 1rem (16px)
lg: 1.125rem (18px)
xl: 1.25rem (20px)
2xl: 1.5rem (24px)
3xl: 1.875rem (30px)
```

### Border Radius

```
none: 0
sm: 0.125rem (2px)
md: 0.375rem (6px)
lg: 0.5rem (8px)
xl: 0.75rem (12px)
full: 9999px
```

### Shadows

```
sm: subtle shadow
md: standard shadow
lg: prominent shadow
xl: large shadow
```

---

## Integration with Services

### API Service Integration

```typescript
// Example: PostCard with like functionality
import { likePost, unlikePost } from "$lib/services/post.service";

async function handleLike() {
  try {
    if (liked) {
      await unlikePost(post.id);
    } else {
      await likePost(post.id);
    }
    // Optimistic update
    liked = !liked;
    likeCount += liked ? 1 : -1;
  } catch (error) {
    // Show error toast
  }
}
```

### Upload Service Integration

```typescript
// Example: ImageUploader with compression
import { uploadSingleImage } from "$lib/services/upload.service";

async function handleUpload(file: File) {
  try {
    const url = await uploadSingleImage(file, {
      maxSizeMB: 2,
      quality: 0.8,
      onProgress: (progress) => {
        uploadProgress = progress;
      },
    });
    images = [...images, url];
  } catch (error) {
    showErrorToast("Upload failed");
  }
}
```

---

## Success Criteria

### Definition of Done for Each Component:

- âœ… TypeScript interfaces defined and exported
- âœ… All variants implemented and tested
- âœ… Responsive design verified (mobile/tablet/desktop)
- âœ… Accessibility compliance checked
- âœ… Unit tests written and passing (>80% coverage)
- âœ… Storybook story created with all variants
- âœ… JSDoc documentation complete
- âœ… Dark mode support implemented
- âœ… Integration with services tested
- âœ… Performance optimized (no unnecessary rerenders)

### Quality Gates:

- **TypeScript:** Zero compilation errors
- **Tests:** >80% code coverage
- **Accessibility:** No automated a11y violations
- **Performance:** <100ms render time
- **Bundle size:** Monitor component size impact

---

## Dependencies Required

### Already Installed:

- Svelte 5
- TypeScript
- Vite
- Tailwind CSS
- Axios
- @testing-library/svelte
- Vitest

### To Install:

```bash
# Material Symbols icons (via CDN or package)
# Add to app.html: <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
# OR: npm install material-symbols

# Plus Jakarta Sans font
# Add to app.html: <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap" rel="stylesheet">
# OR: npm install @fontsource/plus-jakarta-sans

# Date/time handling
npm install date-fns

# Utility functions
npm install clsx

# Carousel functionality (if needed)
npm install embla-carousel-svelte

# Form validation
npm install zod

# Storybook (for component documentation)
npx sb init --builder vite
```

---

## Estimated Timeline

**Total Duration:** 21 working days (~4.5 weeks)

| Phase                    | Components | Days  | Priority        |
| ------------------------ | ---------- | ----- | --------------- |
| **Phase 0: Theme Setup** | **Config** | **2** | **ğŸ¨ Critical** |
| Phase 1: Foundation      | 8          | 3     | â­â­â­ Critical |
| Phase 2: Layout          | 5          | 2     | â­â­â­ High     |
| Phase 3: Cards & Lists   | 6          | 3     | â­â­â­ High     |
| Phase 4: Forms & Inputs  | 8          | 3     | âºâº Medium       |
| Phase 5: Media & Display | 4          | 2     | âºâº Medium       |
| Phase 6: Actions         | 5          | 2     | âºâº Medium       |
| Phase 7: Overlays        | 5          | 2     | â¹ Low           |
| Phase 8: Specialized     | 2          | 2     | â¹ Low           |

**Theme Foundation (Phase 0):** 2 days  
**MVP (Phases 0-3):** 10 days  
**Full Implementation (Phases 0-8):** 21 days

---

## Next Steps

1. **Review and Approve Plan:** Stakeholder sign-off on component list and priorities
2. **Phase 0: Theme Setup (FIRST PRIORITY)**
   - Update Tailwind config with mockup colors
   - Add Material Symbols font and configuration
   - Add Plus Jakarta Sans font
   - Configure dark mode as default
   - Set up glassmorphism utilities
   - Document design system
3. **Set Up Storybook:** Component documentation with theme decorator
4. **Install Dependencies:** Material Symbols, fonts, utilities
5. **Begin Phase 1:** Start with Button, Input, TextArea components (using new theme)
6. **Establish Testing Pattern:** Set up component test template
7. **Build Incrementally:** Complete each phase before moving to next

---

## Mockup Reference Matrix

| Component          | Referenced in Mockups                   |
| ------------------ | --------------------------------------- |
| AppShell           | All mockups                             |
| Header             | 1, 2, 3, 4, 5, 6, 7                     |
| Sidebar            | 1, 3, 6                                 |
| PostCard           | 1 (main feed)                           |
| Input              | 2 (posting), 7 (registration)           |
| TextArea           | 2 (description), 3 (messages)           |
| Select             | 2 (category, location)                  |
| ImageUploader      | 2 (image upload area)                   |
| MessagePreviewCard | 3 (message list)                        |
| Avatar             | All mockups with users                  |
| StatCard           | 6 (analytics dashboard)                 |
| Button             | All mockups                             |
| Badge              | 1 (post status), header (notifications) |

---

## Post-Implementation Tasks

After completing all 42 components, the following tasks must be completed to deliver a production-ready application:

### Task 1: Storybook Setup & Documentation âœ… COMPLETE

**Status**: âœ… COMPLETE (December 17, 2024)  
**Time Spent**: 4 hours  
**Documentation**: [STORYBOOK_SETUP_COMPLETE.md](./1.%20STORYBOOK_SETUP_COMPLETE.md)

**Objective:** Create comprehensive component documentation and interactive playground

**Scope:**

- âœ… Install and configure Storybook 8.4.7 with SvelteKit framework
- âœ… Create stories for all 44 components with variants (379 total stories)
- âœ… Add theme decorator for dark/light mode preview
- âœ… Document all props, events, and usage examples
- âœ… Configure accessibility addon (addon-a11y)
- âœ… Set up Storybook at localhost:6006

**Deliverables:**

- `storybook/` configuration directory
- Story files for each component (`.stories.ts`)
- Theme decorator with dark mode toggle
- Hosted Storybook on GitHub Pages or Netlify
- Component API documentation

**Estimated Effort:** 5 days

**Dependencies:** All 42 components must be completed

**Commands:**

```bash
# Install Storybook
npx storybook@latest init --builder vite

# Install addons
npm install --save-dev @storybook/addon-a11y @storybook/addon-themes

# Run Storybook
npm run storybook
```

**Story Template Example:**

```typescript
// Button.stories.ts
import type { Meta, StoryObj } from "@storybook/svelte";
import Button from "./Button.svelte";

const meta = {
  title: "Components/Buttons/Button",
  component: Button,
  tags: ["autodocs"],
  argTypes: {
    variant: {
      control: "select",
      options: ["primary", "secondary", "ghost", "danger"],
    },
  },
} satisfies Meta<Button>;

export default meta;
type Story = StoryObj<typeof meta>;

export const Primary: Story = {
  args: {
    children: "Click me",
    variant: "primary",
  },
};
```

---

### Task 2: Testing Implementation

**Objective:** Achieve >80% test coverage with comprehensive test suite

**Scope:**

#### 2.1 Unit Tests (Vitest + Testing Library)

- Test all component props and variants
- Test event handlers and callbacks
- Test conditional rendering
- Test computed values and state management
- Test accessibility attributes

**Test Template:**

```typescript
// Button.test.ts
import { render, fireEvent } from "@testing-library/svelte";
import { describe, it, expect, vi } from "vitest";
import Button from "./Button.svelte";

describe("Button Component", () => {
  it("renders with default props", () => {
    const { getByRole } = render(Button, { children: "Click me" });
    expect(getByRole("button")).toBeInTheDocument();
  });

  it("calls onclick handler when clicked", async () => {
    const handleClick = vi.fn();
    const { getByRole } = render(Button, {
      children: "Click me",
      onclick: handleClick,
    });

    await fireEvent.click(getByRole("button"));
    expect(handleClick).toHaveBeenCalledTimes(1);
  });

  it("displays loading state correctly", () => {
    const { getByRole } = render(Button, {
      children: "Submit",
      loading: true,
    });
    expect(getByRole("button")).toBeDisabled();
  });
});
```

#### 2.2 Integration Tests

- Test component interactions (e.g., Modal + Form)
- Test data flow between parent and child components
- Test navigation flows
- Test form submission workflows

#### 2.3 Accessibility Tests (axe-core)

- Automated WCAG 2.1 AA compliance checks
- Keyboard navigation tests
- Screen reader compatibility tests
- Color contrast validation

**Accessibility Test Example:**

```typescript
import { axe } from "jest-axe";

it("should not have accessibility violations", async () => {
  const { container } = render(Button, { children: "Click me" });
  const results = await axe(container);
  expect(results).toHaveNoViolations();
});
```

#### 2.4 Visual Regression Tests (Playwright)

- Screenshot comparison tests for UI consistency
- Test across different viewports
- Test dark mode variants

**Deliverables:**

- Test files for all 42 components
- > 80% code coverage report
- CI/CD integration (GitHub Actions)
- Accessibility audit report
- Visual regression baseline screenshots

**Estimated Effort:** 7 days

**Commands:**

```bash
# Run unit tests
npm run test

# Run tests with coverage
npm run test:coverage

# Run visual tests
npx playwright test

# Run accessibility audit
npm run test:a11y
```

---

### Task 3: Page Implementation

**Objective:** Build complete application pages using the component library

**Scope:** Implement 7 production pages with routing, state management, and API integration

#### 3.1 Landing Page âœ… (Already Complete)

- Hero section with CTA
- Feature showcase
- Benefits grid
- Social proof
- Responsive design

#### 3.2 Main Feed Page (1-main-interface)

**Route:** `/feed` or `/`  
**Components Used:** AppShell, Header, Sidebar, PostCard, CategoryCard, StatCard, EmptyState  
**Features:**

- Grid/list view toggle
- Infinite scroll pagination
- Filter by category
- Sort by (newest, popular, price)
- Search functionality
- Post creation FAB

**State Management:**

```typescript
// stores/feed.ts
import { writable } from "svelte/store";

export const feedPosts = writable<Post[]>([]);
export const feedFilters = writable({
  category: "all",
  sortBy: "newest",
  view: "grid",
});
```

#### 3.3 Posting Page (2-posting-page)

**Route:** `/post/new` and `/post/:id/edit`  
**Components Used:** Input, TextArea, Select, FileUpload, ImageCarousel, Button, ProgressBar  
**Features:**

- Multi-step form (details â†’ images â†’ pricing â†’ review)
- Image upload with preview
- Category and location selection
- Price and duration inputs
- Form validation
- Draft save functionality
- Progress indicator

**Form Schema:**

```typescript
interface PostFormData {
  title: string;
  description: string;
  category: string;
  location: string;
  price: number;
  duration: "1d" | "7d" | "30d";
  images: File[];
}
```

#### 3.4 Messages Page (3-messages-page)

**Route:** `/messages` and `/messages/:conversationId`  
**Components Used:** SplitLayout, MessagePreviewCard, Avatar, Input, Button  
**Features:**

- Conversation list with search
- Real-time message updates (WebSocket)
- Message composition
- Typing indicators
- Read receipts
- Emoji picker
- File attachments

#### 3.5 Profile Page (5-profile-page)

**Route:** `/profile/:userId`  
**Components Used:** Avatar, UserCard, PostCard, StatCard, Tabs, Button, Badge  
**Features:**

- User info header with edit option
- Stats overview (posts, followers, following)
- Posts tab (active/expired/drafts)
- Followers/Following lists
- Follow/Unfollow functionality
- Settings tab (for own profile)

#### 3.6 Analytics Page (6-post-analytics)

**Route:** `/analytics` or `/post/:id/analytics`  
**Components Used:** StatCard, Chart, PostCard, DateRangePicker, Select  
**Features:**

- Overview stats (views, likes, messages)
- Time series charts (views over time)
- Top performing posts
- Traffic sources
- Demographics breakdown
- Export to CSV

#### 3.7 Registration Page (7-registration-page)

**Route:** `/register` and `/login`  
**Components Used:** Input, Checkbox, Button, Toast  
**Features:**

- Email/password registration
- OAuth providers (Google, Facebook)
- Form validation
- Password strength indicator
- Terms acceptance
- Email verification flow
- Login/register toggle

**Deliverables:**

- 7 fully functional pages
- Routing configuration
- Page-level loading states
- Error boundaries
- SEO meta tags
- Mobile-optimized layouts

**Estimated Effort:** 10 days (1.5 days per page)

---

### Task 4: Backend Integration

**Objective:** Connect frontend components to API services with proper error handling

**Scope:**

#### 4.1 API Client Setup

```typescript
// lib/api/client.ts
import axios from "axios";

const apiClient = axios.create({
  baseURL: import.meta.env.VITE_API_URL,
  timeout: 10000,
  headers: {
    "Content-Type": "application/json",
  },
});

// Request interceptor (add auth token)
apiClient.interceptors.request.use((config) => {
  const token = localStorage.getItem("authToken");
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// Response interceptor (handle errors)
apiClient.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      // Redirect to login
      window.location.href = "/login";
    }
    return Promise.reject(error);
  }
);

export default apiClient;
```

#### 4.2 Service Layer Implementation

- Authentication service (login, register, logout, refresh)
- Posts service (CRUD operations, like, share)
- Messages service (send, receive, list conversations)
- User service (profile, follow, update)
- Categories service (list, search)
- Analytics service (stats, charts)

**Service Example:**

```typescript
// lib/api/posts.service.ts
import apiClient from "./client";
import type { Post, PostFormData } from "$lib/types";

export const postsService = {
  async getAll(filters?: PostFilters): Promise<Post[]> {
    const { data } = await apiClient.get("/posts", { params: filters });
    return data;
  },

  async getById(id: string): Promise<Post> {
    const { data } = await apiClient.get(`/posts/${id}`);
    return data;
  },

  async create(postData: PostFormData): Promise<Post> {
    const formData = new FormData();
    Object.entries(postData).forEach(([key, value]) => {
      if (key === "images") {
        value.forEach((file: File) => formData.append("images", file));
      } else {
        formData.append(key, value);
      }
    });

    const { data } = await apiClient.post("/posts", formData, {
      headers: { "Content-Type": "multipart/form-data" },
    });
    return data;
  },

  async update(id: string, updates: Partial<PostFormData>): Promise<Post> {
    const { data } = await apiClient.patch(`/posts/${id}`, updates);
    return data;
  },

  async delete(id: string): Promise<void> {
    await apiClient.delete(`/posts/${id}`);
  },

  async like(id: string): Promise<void> {
    await apiClient.post(`/posts/${id}/like`);
  },
};
```

#### 4.3 State Management with Stores

```typescript
// stores/posts.ts
import { writable, derived } from "svelte/store";
import { postsService } from "$lib/api/posts.service";
import type { Post } from "$lib/types";

function createPostsStore() {
  const { subscribe, set, update } = writable<{
    posts: Post[];
    loading: boolean;
    error: string | null;
  }>({
    posts: [],
    loading: false,
    error: null,
  });

  return {
    subscribe,

    async fetchAll(filters?: PostFilters) {
      update((state) => ({ ...state, loading: true, error: null }));
      try {
        const posts = await postsService.getAll(filters);
        set({ posts, loading: false, error: null });
      } catch (error) {
        update((state) => ({
          ...state,
          loading: false,
          error: error.message,
        }));
      }
    },

    async like(postId: string) {
      // Optimistic update
      update((state) => ({
        ...state,
        posts: state.posts.map((post) =>
          post.id === postId
            ? { ...post, liked: true, likesCount: post.likesCount + 1 }
            : post
        ),
      }));

      try {
        await postsService.like(postId);
      } catch (error) {
        // Revert on error
        update((state) => ({
          ...state,
          posts: state.posts.map((post) =>
            post.id === postId
              ? { ...post, liked: false, likesCount: post.likesCount - 1 }
              : post
          ),
        }));
      }
    },
  };
}

export const postsStore = createPostsStore();
```

#### 4.4 Loading States & Error Handling

- Skeleton loaders during data fetch
- Error toast notifications
- Retry mechanisms
- Network status detection
- Offline mode support

#### 4.5 Optimistic UI Updates

- Like/unlike posts
- Follow/unfollow users
- Delete posts
- Send messages

**Deliverables:**

- API client with interceptors
- 6 service modules
- Store implementations
- Error handling utilities
- Loading state components
- Optimistic update patterns

**Estimated Effort:** 6 days

---

### Task 5: Performance Optimization

**Objective:** Optimize application performance for production

**Scope:**

#### 5.1 Image Lazy Loading

```typescript
// components/LazyImage.svelte
<script lang="ts">
  import { onMount } from 'svelte';

  export let src: string;
  export let alt: string;
  export let placeholder = '/images/placeholder.jpg';

  let loaded = false;
  let imgElement: HTMLImageElement;

  onMount(() => {
    const observer = new IntersectionObserver((entries) => {
      if (entries[0].isIntersecting) {
        imgElement.src = src;
        loaded = true;
        observer.disconnect();
      }
    });

    observer.observe(imgElement);

    return () => observer.disconnect();
  });
</script>

<img
  bind:this={imgElement}
  src={placeholder}
  {alt}
  class:loaded
/>
```

#### 5.2 Virtual Scrolling

```typescript
// Use @sveltejs/svelte-virtual for long lists
import { VirtualList } from '@sveltejs/svelte-virtual';

<VirtualList items={posts} let:item>
  <PostCard post={item} />
</VirtualList>
```

#### 5.3 Code Splitting

```typescript
// Route-based code splitting in +page.ts
export const load = async () => {
  const { default: Analytics } = await import("./Analytics.svelte");
  return { Analytics };
};
```

#### 5.4 Bundle Analysis

```bash
# Install bundle analyzer
npm install --save-dev rollup-plugin-visualizer

# Analyze bundle
npm run build
npx vite-bundle-visualizer
```

#### 5.5 Performance Monitoring

- Lighthouse CI integration
- Web Vitals tracking (LCP, FID, CLS)
- Bundle size limits enforcement
- Performance budgets

**Optimization Targets:**

- First Contentful Paint (FCP): < 1.5s
- Largest Contentful Paint (LCP): < 2.5s
- Time to Interactive (TTI): < 3.5s
- Cumulative Layout Shift (CLS): < 0.1
- Bundle size: < 200KB (gzipped)

**Deliverables:**

- Lazy-loaded images and components
- Virtual scrolling for feeds
- Route-based code splitting
- Performance monitoring dashboard
- Bundle size reports

**Estimated Effort:** 4 days

---

### Task 6: Accessibility Audit

**Objective:** Ensure WCAG 2.1 AA compliance across entire application

**Scope:**

#### 6.1 Keyboard Navigation Testing

- Tab order verification
- Focus trap in modals
- Escape to close overlays
- Arrow key navigation in menus
- Enter/Space for buttons

**Checklist:**

- [ ] All interactive elements are keyboard accessible
- [ ] Focus indicators are clearly visible
- [ ] No keyboard traps exist
- [ ] Skip navigation links provided
- [ ] Dropdown menus support arrow keys

#### 6.2 Screen Reader Testing

- Test with NVDA (Windows)
- Test with VoiceOver (macOS/iOS)
- Test with TalkBack (Android)

**Checklist:**

- [ ] All images have alt text
- [ ] ARIA labels on icon buttons
- [ ] Form inputs have associated labels
- [ ] Error messages are announced
- [ ] Loading states are announced
- [ ] Landmark regions defined (header, nav, main, footer)

#### 6.3 Color Contrast Verification

```bash
# Use axe DevTools or similar
npx pa11y-ci --runner axe
```

**Requirements:**

- Normal text: 4.5:1 contrast ratio
- Large text: 3:1 contrast ratio
- UI components: 3:1 contrast ratio

#### 6.4 Focus Management

- Focus moved to modal on open
- Focus returned to trigger on close
- Focus moved to first error on validation
- Focus moved to new content on route change

**Deliverables:**

- Accessibility audit report (PDF)
- Remediation checklist
- WCAG 2.1 AA compliance certificate
- Screen reader test documentation

**Estimated Effort:** 3 days

---

### Task 7: Responsive Design Testing

**Objective:** Verify responsive behavior across all devices and breakpoints

**Scope:**

#### 7.1 Breakpoint Testing

**Breakpoints:**

- Mobile: 320px - 639px
- Tablet: 640px - 1023px
- Desktop: 1024px - 1535px
- Large Desktop: 1536px+

**Testing Matrix:**

- iPhone SE (375px)
- iPhone 12 Pro (390px)
- iPad Mini (768px)
- iPad Pro (1024px)
- MacBook Air (1280px)
- 4K Display (2560px)

#### 7.2 Touch Gesture Support

- Swipe gestures on carousels
- Pull-to-refresh on feeds
- Pinch-to-zoom on images
- Long-press context menus

#### 7.3 iOS Safe Area Handling

```css
/* Handle notch and home indicator */
padding-top: env(safe-area-inset-top);
padding-bottom: env(safe-area-inset-bottom);
padding-left: env(safe-area-inset-left);
padding-right: env(safe-area-inset-right);
```

#### 7.4 Android Back Button

```typescript
// Handle Android back button
onMount(() => {
  const handleBackButton = () => {
    if (modalOpen) {
      modalOpen = false;
      return false; // Prevent default
    }
    return true; // Allow default
  };

  window.addEventListener("popstate", handleBackButton);
  return () => window.removeEventListener("popstate", handleBackButton);
});
```

#### 7.5 Orientation Changes

- Test portrait and landscape modes
- Adjust layouts for horizontal orientation
- Handle keyboard appearance

**Deliverables:**

- Responsive test report
- Device compatibility matrix
- Touch gesture implementation
- iOS safe area adjustments
- Android navigation handling

**Estimated Effort:** 3 days

---

## Summary: Post-Implementation Timeline

| Task                         | Effort      | Priority        | Dependencies        |
| ---------------------------- | ----------- | --------------- | ------------------- |
| 1. Storybook Setup           | 5 days      | High            | All components done |
| 2. Testing Implementation    | 7 days      | Critical        | All components done |
| 3. Page Implementation       | 10 days     | Critical        | All components done |
| 4. Backend Integration       | 6 days      | Critical        | Pages implemented   |
| 5. Performance Optimization  | 4 days      | High            | Backend integrated  |
| 6. Accessibility Audit       | 3 days      | High            | All pages complete  |
| 7. Responsive Design Testing | 3 days      | High            | All pages complete  |
| **Total**                    | **38 days** | **(7.6 weeks)** |                     |

**Production Ready:** ~60 days total (component implementation + post-implementation tasks)

---

**Document Status:** Updated v2.0  
**Last Updated:** December 17, 2025  
**Component Implementation:** âœ… Categories 1-6 Complete (42/42 components)  
**Next Review:** After Storybook setup completion
